# 彩色五子棋 - 快速开始指南

## 安装

```bash
# 安装依赖
pip install -r requirements.txt
```

## 快速体验

### 1. 运行演示

```bash
python demo.py
```

这会展示：
- 随机AI玩游戏的演示
- 消除检测的测试

### 2. 人类玩家游戏

```bash
python play.py --mode human
```

操作说明：
- 点击空格选择起始位置
- 再点击另一个可达的空格进行移动
- 按 **R** 重新开始
- 按 **ESC** 退出

### 3. 训练AI

```bash
# 基本训练（10000回合，约需几小时）
python train.py

# 快速测试训练（100回合）
python train.py --num_episodes 100 --eval_interval 10

# 自定义参数
python train.py --num_episodes 20000 --lr 1e-4 --hidden_dim 512
```

### 4. 观看AI玩游戏

```bash
# 使用训练好的模型
python play.py --mode ai --model_path ./models/best_model.pt

# 调整速度
python play.py --mode ai --delay 0.1
```

## 训练参数说明

| 参数 | 默认值 | 说明 |
|------|--------|------|
| `--num_episodes` | 10000 | 训练回合数 |
| `--update_interval` | 2048 | 网络更新间隔（步数） |
| `--eval_interval` | 100 | 评估间隔（回合数） |
| `--save_interval` | 500 | 模型保存间隔 |
| `--hidden_dim` | 256 | 隐藏层维度 |
| `--lr` | 3e-4 | 学习率 |
| `--gamma` | 0.99 | 折扣因子 |
| `--entropy_coef` | 0.01 | 熵奖励系数 |

## 文件说明

| 文件 | 说明 |
|------|------|
| `game_env.py` | 游戏环境（Gymnasium接口） |
| `ppo_agent.py` | PPO智能体实现 |
| `train.py` | 训练脚本 |
| `play.py` | 可视化游戏界面 |
| `demo.py` | 演示脚本 |

## 输出目录

| 目录 | 内容 |
|------|------|
| `./logs/` | 训练日志和指标 |
| `./models/` | 保存的模型文件 |

## 游戏规则速查

1. **棋盘**: 9×9
2. **颜色**: 深蓝、浅蓝、浅紫、浅红、亮黄色、绿色、咖啡
3. **移动**: 空格 → 可达的空格（上下左右）
4. **消除**: 5个及以上连续同色（横/竖/对角）
5. **得分**: 5个=10分，每多一个+4分
6. **添加**: 不消除则添加3个随机棋子
7. **结束**: 棋盘满

## 技巧提示

### 人类玩家
- 提前规划，创造多消除机会
- 注意即将出现的棋子颜色
- 尽量保持棋盘空间

### AI训练
- 训练时间较长，建议使用GPU
- 可以调整`entropy_coef`来平衡探索和利用
- 观察`eval_score`来评估AI进步

## 常见问题

**Q: 训练需要多长时间？**
A: 取决于硬件和参数。CPU上10000回合可能需要几小时，GPU上会快很多。

**Q: 如何知道AI训练好了？**
A: 观察评估得分(`eval_score`)，如果持续上升说明AI在进步。

**Q: 可以修改游戏规则吗？**
A: 可以！修改`game_env.py`中的参数，如棋盘大小、颜色数量等。

**Q: 为什么AI有时做出奇怪的动作？**
A: 强化学习需要大量训练。增加训练回合数或调整参数可以改善。
